/*
Created: 25/03/2019
Modified: 28/03/2019
Model: Microsoft SQL Server 2017
Database: MS SQL Server 2017
*/


-- Create schemas section -------------------------------------------------

CREATE SCHEMA [carga]
go

-- Create tables section -------------------------------------------------

-- Table MATERIAL

CREATE TABLE [MATERIAL]
(
 [ID_MATERIAL] Int IDENTITY NOT NULL,
 [TOTALELEMENTS] Int NULL,
 [TOTALPAGES] Int NULL,
 [LASTPAGE] Bit NULL,
 [NUMBERSELEMENTS] Int NULL,
 [FIRSTPAGE] Bit NULL,
 [SORT] Int NULL,
 [NUMBER] Int NULL,
 [SIZE] Int NULL
)
go

-- Add keys for table MATERIAL

ALTER TABLE [MATERIAL] ADD CONSTRAINT [ID_MATERIAL] PRIMARY KEY ([ID_MATERIAL])
go

-- Table CONTENT_MATERIAL

CREATE TABLE [CONTENT_MATERIAL]
(
 [CONTENT_ID] Int IDENTITY NOT NULL,
 [MATERIAL_ID] Int NULL,
 [EMPRESA_ID] Int NOT NULL,
 [MSG_ID] Int NOT NULL,
 [VENCIMENTO_ID] Int NULL,
 [CLASSE_RISCO_ID] Int NULL,
 [PROCESSO] Varchar(40) NULL,
 [DESC_PRODUTO] Varchar(max) NULL,
 [COD_ANV] Numeric(18,0) NULL,
 [SITUACAO] Varchar(4000) NULL,
 [NOME_TECNICO] Varchar(4000) NULL,
 [CANCELADO] Bit NULL,
 [DATA_CANCELAMENTO] Date NULL,
 [PUBLICACAO] Date NULL,
 [APRESENTACAOMODELO] Bit NULL
)
go

-- Add keys for table CONTENT_MATERIAL

ALTER TABLE [CONTENT_MATERIAL] ADD CONSTRAINT [Key2] PRIMARY KEY ([CONTENT_ID])
go

-- Table EMPRESA

CREATE TABLE [EMPRESA]
(
 [ID_EMPRESA] Int IDENTITY NOT NULL,
 [CNPJ] Varchar(20) NULL,
 [RAZAO_SOCIAL] Varchar(2000) NULL,
 [NUMEROAUTORIZACAO] Int NULL,
 [CNPJFORMATADO] Varchar(30) NULL,
 [AUTORIZACAO] Varchar(2000) NULL
)
go

-- Add keys for table EMPRESA

ALTER TABLE [EMPRESA] ADD CONSTRAINT [Key3] PRIMARY KEY ([ID_EMPRESA])
go

-- Table MENSAGEM

CREATE TABLE [MENSAGEM]
(
 [ID_MSG] Int IDENTITY NOT NULL,
 [SITUACAO] Varchar(2000) NULL,
 [RESOLUCAO] Varchar(2000) NULL,
 [MOTIVO] Varchar(2000) NULL,
 [NEGATIVO] Bit NULL
)
go

-- Add keys for table MENSAGEM

ALTER TABLE [MENSAGEM] ADD CONSTRAINT [Key4] PRIMARY KEY ([ID_MSG])
go

-- Table APRESENTACAOMATERIAL

CREATE TABLE [APRESENTACAOMATERIAL]
(
 [APRESENTACAO_ID] Int IDENTITY NOT NULL,
 [MODELO] Varchar(max) NULL,
 [COMPONENTE] Varchar(max) NULL,
 [APRESENTACAO] Varchar(max) NULL
)
go

-- Add keys for table APRESENTACAOMATERIAL

ALTER TABLE [APRESENTACAOMATERIAL] ADD CONSTRAINT [Key5] PRIMARY KEY ([APRESENTACAO_ID])
go

-- Table FABRICANTE

CREATE TABLE [FABRICANTE]
(
 [FABRICANTE_ID] Int IDENTITY NOT NULL,
 [ATIVIDADE] Varchar(2000) NULL,
 [RAZAOSOCIAL] Varchar(2000) NULL,
 [PAIS] Varchar(300) NULL,
 [LOCAL] Varchar(300) NULL
)
go

-- Add keys for table FABRICANTE

ALTER TABLE [FABRICANTE] ADD CONSTRAINT [Key6] PRIMARY KEY ([FABRICANTE_ID])
go

-- Table CLASSE_RISCO

CREATE TABLE [CLASSE_RISCO]
(
 [CLASSE_RISCO_ID] Int IDENTITY NOT NULL,
 [SIGLA] Varchar(5) NULL,
 [DESCRICAO] Varchar(500) NULL
)
go

-- Add keys for table CLASSE_RISCO

ALTER TABLE [CLASSE_RISCO] ADD CONSTRAINT [Key7] PRIMARY KEY ([CLASSE_RISCO_ID])
go

-- Table VENCIMENTO

CREATE TABLE [VENCIMENTO]
(
 [VENCIMENTO_ID] Int IDENTITY NOT NULL,
 [DATA] Date NULL,
 [DESCRICAO] Varchar(2000) NULL
)
go

-- Add keys for table VENCIMENTO

ALTER TABLE [VENCIMENTO] ADD CONSTRAINT [Key8] PRIMARY KEY ([VENCIMENTO_ID])
go

-- Table APRESENTACAO_CONTENT

CREATE TABLE [APRESENTACAO_CONTENT]
(
 [APRESENTACAO_ID] Int NULL,
 [CONTENT_ID] Int NULL
)
go

-- Table FABRICANTE_CONTENT

CREATE TABLE [FABRICANTE_CONTENT]
(
 [CONTENT_ID] Int NULL,
 [FABRICANTE_ID] Int NULL
)
go

-- Create foreign keys (relationships) section ------------------------------------------------- 


ALTER TABLE [CONTENT_MATERIAL] ADD CONSTRAINT [FK_EMPRESA_CONTENT] FOREIGN KEY ([EMPRESA_ID]) REFERENCES [EMPRESA] ([ID_EMPRESA]) ON UPDATE NO ACTION ON DELETE NO ACTION
go


ALTER TABLE [CONTENT_MATERIAL] ADD CONSTRAINT [FK_ID_MATERIAL_CONTENT] FOREIGN KEY ([MATERIAL_ID]) REFERENCES [MATERIAL] ([ID_MATERIAL]) ON UPDATE NO ACTION ON DELETE NO ACTION
go


ALTER TABLE [CONTENT_MATERIAL] ADD CONSTRAINT [FK_CONTENT_MSG] FOREIGN KEY ([MSG_ID]) REFERENCES [MENSAGEM] ([ID_MSG]) ON UPDATE NO ACTION ON DELETE NO ACTION
go


ALTER TABLE [CONTENT_MATERIAL] ADD CONSTRAINT [FK_VENCIMENTO_CONTENT] FOREIGN KEY ([VENCIMENTO_ID]) REFERENCES [VENCIMENTO] ([VENCIMENTO_ID]) ON UPDATE NO ACTION ON DELETE NO ACTION
go


ALTER TABLE [CONTENT_MATERIAL] ADD CONSTRAINT [FK_CLASSE_RISCO_CONTENT] FOREIGN KEY ([CLASSE_RISCO_ID]) REFERENCES [CLASSE_RISCO] ([CLASSE_RISCO_ID]) ON UPDATE NO ACTION ON DELETE NO ACTION
go


ALTER TABLE [APRESENTACAO_CONTENT] ADD CONSTRAINT [FK_APRESENTACAO_CONTENT] FOREIGN KEY ([APRESENTACAO_ID]) REFERENCES [APRESENTACAOMATERIAL] ([APRESENTACAO_ID]) ON UPDATE NO ACTION ON DELETE NO ACTION
go


ALTER TABLE [APRESENTACAO_CONTENT] ADD CONSTRAINT [FK_CONTENT_APRESENTACAO] FOREIGN KEY ([CONTENT_ID]) REFERENCES [CONTENT_MATERIAL] ([CONTENT_ID]) ON UPDATE NO ACTION ON DELETE NO ACTION
go


ALTER TABLE [FABRICANTE_CONTENT] ADD CONSTRAINT [FK_CONTENT_FABRICANTE] FOREIGN KEY ([CONTENT_ID]) REFERENCES [CONTENT_MATERIAL] ([CONTENT_ID]) ON UPDATE NO ACTION ON DELETE NO ACTION
go


ALTER TABLE [FABRICANTE_CONTENT] ADD CONSTRAINT [FK_FABRICANTE_CONTENT] FOREIGN KEY ([FABRICANTE_ID]) REFERENCES [FABRICANTE] ([FABRICANTE_ID]) ON UPDATE NO ACTION ON DELETE NO ACTION
go




